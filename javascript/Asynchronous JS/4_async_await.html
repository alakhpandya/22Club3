<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

</body>
<script>
    /*
    async function func1(){
        try{
            await _____
        }
        catch(error){

        }
        finally{

        }
    }
    */

    /*
    let oven = () => {
        return new Promise((resolve, reject) => {
            setTimeout(() => {
                resolve(console.log('Sandwich is grilled...'));
            }, 5000)
        })
    }

    async function kitchen(){
        console.log('customer A');
        console.log('customer B');
        console.log('customer C');

        await oven();

        console.log('customer D');
        console.log('customer E');
    }

    kitchen();
    console.log('Down the shutter');
    console.log('Clean the utensils');
    console.log('Do the accounting');
    */

    let is_open = true;
    let order = (time, task) => {
        return new Promise((resolve, reject) => {
            // resolve condition
            if (is_open){
                setTimeout(() => {
                    resolve(task());
                }, time)
            }
            else{
                // reject condition
                // reject(console.log("Error 404: Shop is closed."));
                reject("Error 404: Shop is closed all of a sudden.");
            }
        })
    }

    async function cooking(){
        try{

            await order(2000, () => console.log("Order recieved, chopping the vegetales"))
            await order(3000, () => console.log("Adding masala"))
            await order(1000, () => console.log("Boiling"))
            is_open = false;
            await order(4000, () => console.log("Taking plate"))
            await order(3000, () => console.log("Preparing sandwich"))
            await order(2000, () => console.log("Here's your sandwich!"))
        }
        catch(error){
            // console.log('Refund issued, customer left the shop.')
            console.log(error);
        }
        finally{
            console.log("Let's calculate today's profit!")
        }
    }

    cooking();
</script>
</html>